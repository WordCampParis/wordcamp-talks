/*! wordcamp-talks - v1.1.2 - 2017-11-07 5:35:37 PM UTC - https://github.com/WordCampParis/wordcamp-talks */
!function(a){function b(b){a(".rating-info").html(wct_vars.wait_msg);var d={action:"wct_rate",rate:b,wpnonce:wct_vars.wpnonce,talk:a("#rate").data("talk")};a.post(wct_vars.ajaxurl,d,function(b){b&&b>0?a(".rating-info").html(wct_vars.success_msg+" "+b).fadeOut(2e3,function(){c(1),a(this).show()}):(a(".rating-info").html(wct_vars.error_msg),a.fn.raty("readOnly",!1,"#rate"))})}function c(b){var c,d=Number(wct_vars.rate_nb)+b;c=1===d?wct_vars.one_rate:0===d?wct_vars.not_rated:wct_vars.x_rate.replace("%",d),a(".rating-info").html("<a>"+c+"</a>")}wct_vars.canonical&&window.history.replaceState&&window.history.replaceState(null,null,wct_vars.canonical+window.location.hash),"undefined"!=typeof wct_vars.raty_loaded&&(c(0),a("div#rate").raty({cancel:!1,half:!1,halfShow:!0,starType:"i",readOnly:wct_vars.readonly,score:wct_vars.average_rate,targetKeep:!1,noRatedMsg:wct_vars.not_rated,hints:wct_vars.hints,number:wct_vars.hints_nb,click:function(c){wct_vars.can_rate&&(a.fn.raty("readOnly",!0,"#rate"),b(c))}})),a("#wordcamp-talks-form ul.category-list").on("click",":checkbox",function(b){a.each(a(b.delegateTarget).find(":checked"),function(c,d){a(d).prop("id")!==a(b.target).prop("id")&&a(d).prop("checked",!1)})}),"undefined"!=typeof wct_vars.tagging_loaded&&(a("#_wct_the_tags").tagging({"tags-input-name":"wct[_the_tags]","edit-on-delete":!1,"tag-char":"","forbidden-chars":[".","_","?","<",">"],"forbidden-words":["&lt;","&gt;"],"no-duplicate-text":wct_vars.duplicate_tag,"forbidden-chars-text":wct_vars.forbidden_chars,"forbidden-words-text":wct_vars.forbidden_words}),a("#_wct_the_title").focus(),a("#wct_most_used_tags .tag-items a").on("click",function(b){b.preventDefault(),a("#_wct_the_tags").tagging("add",a(this).html())}),a("#wordcamp-talks-form").on("reset",function(){a("#_wct_the_tags").tagging("reset")})),"undefined"!=typeof wp&&"undefined"!=typeof wp.heartbeat&&"undefined"!=typeof wct_vars.pulse&&(wp.heartbeat.interval(wct_vars.pulse),a.fn.extend({"heartbeat-send":function(){return this.bind("heartbeat-send.wc_talks")}})),a(document).on("heartbeat-send.wc_talks",function(a,b){b.wc_talks_heartbeat_current_talk=wct_vars.talk_id}),a(document).on("heartbeat-tick",function(b,c){c.wc_talks_heartbeat_response&&(a("#wordcamp-talks .message").length?(a("#wordcamp-talks .message").removeClass("error").addClass("info"),a("#wordcamp-talks .message p").html(wct_vars.warning)):a("#wordcamp-talks").prepend('<div class="message info"><p>'+wct_vars.warning+"</p></div>"),a('#wordcamp-talks .submit input[name="wct[save]"]').remove())})}(jQuery);